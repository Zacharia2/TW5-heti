<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="application-name" content="TiddlyWiki Plugin Library" />
<meta name="application-version" content="v0.0.0" />
<meta name="copyright" content="Copyright 2015 Jeremy Ruston" />
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<title>Plugin Library</title>
<script>
var assetList = [
    {
        "title": "$:/plugins/tiddly-gittly/heti",
        "author": "tiddly-gittly",
        "description": "专为中文内容展示设计的排版样式增强",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.2",
        "list": "readme license",
        "dependents": "",
        "type": "application/json",
        "Modern.TiddlyDev#SHA256-Hashed": "59bfc833f6afee31eec7f20acda2041a7808dc99501654f43079770da8f2bc40",
        "readme": "!  赫蹏（hètí）\n\n<<<\n赫蹏（hètí）是专为中文内容展示设计的排版样式增强。它基于通行的中文排版规范而来，可以为网站的读者带来更好的文章阅读体验。\n<<<\n\n!! tw5-heti-plugin\n\ngithub上游项目主页：https://github.com/sivan/heti\n\n采用了[[hete项目|https://github.com/sivan/heti]]以及[[演示网址|https://sivan.github.io/heti/#example-verse]]\n\n\n有些样式我没有放示例进来，比如多栏显示。因为我觉得没必要。有些样式与太微自身存在问题，比如竖排，我怀疑是容器溢出，但我不知道如何解决。还有些，理论上居中了，但在具体条目里并没有完全居中，我怀疑是与底部css冲突了。但总体上是非常好看的。\n\n[[常用标签示例表|$:/plugins/tiddly-gittly/heti/常用标签示例表]]\n\n这个里面一样可以用维基语法，比如诗词的作者就可以用链接的形式`[[]]`。竖排的问题，就用拆分成多个条目然后嵌入，相当于翻页了。效果还是可以的。说些题外话，以前见过外国用户，用太微做了一个圣经，非常好看。现在我们也可以用这个插件做一些古文版本的收集整理，方便更多的人学习传统文化。当然这需要更多的人去做。\n\n这应该是我做的第一个插件，后续应该不太需要更新。因为用户可以根据需要自己写相应标签。我做一个按钮只是方便直接使用。不过积累到不少的经验，还是很好的。再一次感谢xp教程的作者，从最开始学习太微就看xp教程，现在编写插件还是看xp教程。整个按钮就是模仿xp里的columns插件。大家有兴趣也可以仿照写一个自己的插件玩玩。\n\n!! 示例\n\n!!! 古诗词示例\n{{$:/plugins/tiddly-gittly/heti/example/古诗词示例}}\n---\n\n!!! 古文示例\n{{$:/plugins/tiddly-gittly/heti/example/古文示例}}\n---\n\n!!! 竖排示例\n{{$:/plugins/tiddly-gittly/heti/example/竖排示例}}\n---\n\n!!! 行间注示例\n{{$:/plugins/tiddly-gittly/heti/example/行间注示例}}",
        "requires-reload": "yes"
    }
];

/*\
title: $:/plugins/tiddlywiki/pluginlibrary/libraryserver.js
type: application/javascript
module-type: library

A simple HTTP-over-window.postMessage implementation of a standard TiddlyWeb-compatible server. It uses real HTTP to load the individual tiddler JSON files.

\*/
(function(){

/*jslint node: true, browser: true */
/*global $tw: false */
"use strict";

// Listen for window messages
window.addEventListener("message",function listener(event){
	console.log("plugin library: Received message from",event.origin);
	console.log("plugin library: Message content",event.data);
	switch(event.data.verb) {
		case "GET":
			if(event.data.url === "recipes/library/tiddlers.json") {
				// Route for recipes/library/tiddlers.json
				event.source.postMessage({
					verb: "GET-RESPONSE",
					status: "200",
					cookies: event.data.cookies,
					url: event.data.url,
					type: "application/json",
					body: JSON.stringify(assetList,null,4)
				},"*");
			} else if(event.data.url.indexOf("recipes/library/tiddlers/") === 0) {
				var url = "recipes/library/tiddlers/" + encodeURIComponent(removePrefix(event.data.url,"recipes/library/tiddlers/"));
				// Route for recipes/library/tiddlers/<uri-encoded-tiddler-title>.json
				httpGet(url,function(err,responseText) {
					if(err) {
						event.source.postMessage({
							verb: "GET-RESPONSE",
							status: "404",
							cookies: event.data.cookies,
							url: event.data.url,
							type: "text/plain",
							body: "Not found"
						},"*");
					} else {
						event.source.postMessage({
							verb: "GET-RESPONSE",
							status: "200",
							cookies: event.data.cookies,
							url: event.data.url,
							type: "application/json",
							body: responseText
						},"*");
					}
				});
			} else {
				event.source.postMessage({
					verb: "GET-RESPONSE",
					status: "404",
					cookies: event.data.cookies,
					url: event.data.url,
					type: "text/plain",
					body: "Not found"
				},"*");
			}
			break;
	}
},false);

// Helper to remove string prefixes
function removePrefix(string,prefix) {
	if(string.indexOf(prefix) === 0) {
		return string.substr(prefix.length);
	} else {
		return string;
	}
}

// Helper for HTTP GET
function httpGet(url,callback) {
	var http = new XMLHttpRequest();
	http.open("GET",url,true);
	http.onreadystatechange = function() {
		if(http.readyState == 4 && http.status == 200) {
			callback(null,http.responseText);
		}
	};
	http.send();
}

})();

</script>
</head>
<body><h1>HelloThere</h1><p>This is the TiddlyWiki plugin library. It is not intended to be opened directly in the browser.</p><p>See <a href="https://tiddlywiki.com/" target="_blank">https://tiddlywiki.com/</a> for details of how to install plugins.</p></body>
</html>